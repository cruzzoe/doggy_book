{% extends "base.html" %}

{% block content %}
<!--This is linked to My Dogs-->
<section class="page-section" id="bookings">
    <div class="container"> 
        <!-- Contact Section Heading-->
        <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">My Dog's Available Slots</h2>
        <!-- Icon Divider-->
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
            <div class="divider-custom-line"></div>
        </div>

    <h3><a href="{{ url_for('register_dog') }}/">Register Dog</a></h3>
    <h3><a href="{{ url_for('new_slot') }}">Add Slot</a></h3>
    <h3><a href="{{ url_for('edit_dog') }}">Edit Dog</a></h3>
    <h3><a href="{{ url_for('upload_photo') }}">Upload Photo</a></h3>
    </br>
    <h4>My Available Slots</h4>
    {% for dog in dogs %}
        <h4>{{ dog.dog_name}}</h4>
        <table class="table table-hover">
            <thead>
            <tr>
                <th scope="col">Dog name</th>
                <th scope="col">Date</th>
                <th scope="col">Start</th>
                <th scope="col">End</th>
                <th scope="col">Booked By</th>
                <th scope="col">Action</th>
            </tr>
            </thead>
            {% for slot in dog.slots.all() %}
            <tr>
                <td>{{slot.subject.dog_name}}</td>
                <td>{{slot.date}}</td> 
                <td>{{slot.start}}</td> 
                <td>{{slot.end}}</td> 
                <td>{{slot.booker.username}}</td>
                <td><a href="{{ url_for('delete_slot', slot=slot.id) }}">Delete Slot</a></td> 
            </tr>
            {% endfor %}
        </table>
    {% endfor %}

    {% if picture %}
    <img class="img-fluid rounded mb-5" src="{{ url_for('upload', filename=picture) }}" style="width: 500px">
    {% endif %}
{% endblock %}